# å¸¦ä»·æ ¼å’Œé™åˆ¶ä¿¡æ¯çš„é…ç½®ç¤ºä¾‹

server:
  host: "0.0.0.0"
  port: 8000
  workers: 4
  log_level: "info"

plugins:
  auth: "simple"
  model_route: "config"
  stats: ["log", "memory"]

auth:
  simple:
    api_keys:
      - "your-api-key-here"

stats:
  log:
    format: "text"  # ä½¿ç”¨ text æ ¼å¼ä¼šæ˜¾ç¤ºæˆæœ¬ä¿¡æ¯
  memory:
    max_records: 1000

models:
  # æ–¹å¼1ï¼šç›´æ¥åœ¨æ¨¡å‹é…ç½®ä¸‹å†™ï¼ˆæ¨èï¼Œç®€æ´ï¼‰
  # ç³»ç»Ÿä¼šè‡ªåŠ¨å°†è¿™äº›å¯é€‰å­—æ®µæ”¾å…¥ metadata
  gpt-3.5-turbo:
    api_base: "https://api.openai.com/v1"
    api_key: "your-openai-api-key"
    adapter: "openai"
    timeout: 30
    max_retries: 3
    
    # æ¨¡å‹é™åˆ¶ï¼ˆå¯é€‰ï¼‰
    max_tokens: 4096  # æ¨¡å‹æœ€å¤§ token æ•°
    max_input_tokens: 3072  # æœ€å¤§è¾“å…¥ token
    max_output_tokens: 1024  # æœ€å¤§è¾“å‡º token
    
    # ä»·æ ¼ä¿¡æ¯ï¼ˆå¯é€‰ï¼Œç¾å…ƒ/1K tokensï¼Œ2024å¹´ä»·æ ¼ï¼‰
    price_per_1k_prompt_tokens: 0.0015  # $0.0015 / 1K è¾“å…¥ tokens
    price_per_1k_completion_tokens: 0.002  # $0.002 / 1K è¾“å‡º tokens
  
  # æ–¹å¼2ï¼šæ˜¾å¼æ”¾åœ¨ metadata ä¸­ï¼ˆçµæ´»ï¼Œå¯ä»¥æ·»åŠ ä»»ä½•è‡ªå®šä¹‰å­—æ®µï¼‰
  gpt-4:
    api_base: "https://api.openai.com/v1"
    api_key: "your-openai-api-key"
    adapter: "openai"
    
    # ä½¿ç”¨ metadata ç»Ÿä¸€ç®¡ç†æ‰€æœ‰å¯é€‰ä¿¡æ¯
    metadata:
      # æ¨¡å‹é™åˆ¶
      max_tokens: 8192
      max_input_tokens: 6144
      max_output_tokens: 2048
      
      # ä»·æ ¼ä¿¡æ¯ï¼ˆGPT-4 æ›´è´µï¼‰
      price_per_1k_prompt_tokens: 0.03  # $0.03 / 1K è¾“å…¥ tokens
      price_per_1k_completion_tokens: 0.06  # $0.06 / 1K è¾“å‡º tokens
      
      # è‡ªå®šä¹‰å­—æ®µï¼ˆmetadata å¯ä»¥æ”¾ä»»ä½•ä¿¡æ¯ï¼‰
      model_version: "gpt-4-0613"
      provider: "OpenAI"
      description: "æœ€å¼ºå¤§çš„ GPT-4 æ¨¡å‹"
  
  # GPT-4 Turbo - æ€§ä»·æ¯”é«˜çš„ GPT-4
  gpt-4-turbo-preview:
    api_base: "https://api.openai.com/v1"
    api_key: "your-openai-api-key"
    adapter: "openai"
    
    # æ¨¡å‹é™åˆ¶
    max_tokens: 128000
    max_input_tokens: 120000
    max_output_tokens: 4096
    
    # ä»·æ ¼ä¿¡æ¯ï¼ˆæ¯” GPT-4 ä¾¿å®œï¼‰
    price_per_1k_prompt_tokens: 0.01  # $0.01 / 1K è¾“å…¥ tokens
    price_per_1k_completion_tokens: 0.03  # $0.03 / 1K è¾“å‡º tokens
  
  # Claude 3 Sonnet
  claude-3-sonnet:
    api_base: "https://api.anthropic.com/v1"
    api_key: "your-anthropic-api-key"
    adapter: "anthropic"
    
    # æ¨¡å‹é™åˆ¶
    max_tokens: 200000
    max_input_tokens: 180000
    max_output_tokens: 4096
    
    # ä»·æ ¼ä¿¡æ¯ï¼ˆAnthropic ä»·æ ¼ï¼‰
    price_per_1k_prompt_tokens: 0.003  # $0.003 / 1K è¾“å…¥ tokens
    price_per_1k_completion_tokens: 0.015  # $0.015 / 1K è¾“å‡º tokens

rate_limit:
  enabled: true
  default_limit: "100/minute"
  by_user: true

# å¤‡æ³¨ï¼š
# 1. ä¸¤ç§é…ç½®æ–¹å¼éƒ½æ”¯æŒï¼š
#    - æ–¹å¼1ï¼ˆæ¨èï¼‰ï¼šç›´æ¥å†™åœ¨æ¨¡å‹é…ç½®ä¸‹ï¼Œç®€æ´æ˜äº†
#    - æ–¹å¼2ï¼šæ˜¾å¼æ”¾åœ¨ metadata ä¸­ï¼Œæ›´çµæ´»ï¼Œå¯æ·»åŠ è‡ªå®šä¹‰å­—æ®µ
# 2. æ‰€æœ‰å¯é€‰å­—æ®µéƒ½ä¼šè¢«è‡ªåŠ¨æ”¾å…¥ metadata ä¸­ç»Ÿä¸€ç®¡ç†
# 3. ä»·æ ¼ä¿¡æ¯ä¼šç”¨äºè®¡ç®—æ¯æ¬¡è¯·æ±‚çš„æˆæœ¬
# 4. æˆæœ¬ä¿¡æ¯ä¼šåœ¨æ—¥å¿—ä¸­æ˜¾ç¤ºï¼Œæ ¼å¼ï¼šğŸ’°æˆæœ¬=$0.000123
# 5. åœ¨æœåŠ¡å…³é—­æ—¶ï¼Œä¼šæ˜¾ç¤ºæ€»æˆæœ¬ç»Ÿè®¡
# 6. æ¨¡å‹é™åˆ¶ä¿¡æ¯ç”¨äºæç¤ºå’ŒéªŒè¯

